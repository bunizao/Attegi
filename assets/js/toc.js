(()=>{var e,b=document,h=window,g={headingSelector:".post-content h2, .post-content h3, .post-content h4",minHeadings:2,scrollOffset:100,throttleDelay:100},v={headings:[],isOpen:!1,activeIndex:-1,isVisible:!1,articleTop:0,articleBottom:0},f={sidebar:null,mobileTrigger:null,mobileOverlay:null,mobileDrawer:null,tocList:null,mobileTocList:null,links:[],mobileLinks:[]};function y(){var e,t,i;f.sidebar&&(e=h.pageYOffset||b.documentElement.scrollTop,t=h.innerHeight,f.sidebar.offsetHeight,(i=b.querySelector(".post-content"))&&(i=i.getBoundingClientRect(),v.articleTop=i.top+e,v.articleBottom=i.bottom+e),i=v.articleTop-100,t=v.articleBottom-t+100,(i=i<=e&&e<=t)!==v.isVisible)&&((v.isVisible=i)?f.sidebar.classList.add("is-visible"):f.sidebar.classList.remove("is-visible"))}function x(e){e.preventDefault();var e=e.currentTarget.getAttribute("href"),t=e.substring(1),t=b.getElementById(t);t&&(t=t.getBoundingClientRect().top+h.pageYOffset-g.scrollOffset,h.scrollTo({top:t,behavior:"smooth"}),history.pushState)&&history.pushState(null,null,e)}function E(){for(var e,t,i,n=h.pageYOffset||b.documentElement.scrollTop,l=(h.innerHeight,-1),o=v.headings.length-1;0<=o;o--)if(n>=v.headings[o].element.getBoundingClientRect().top+n-g.scrollOffset-50){l=o;break}l!==v.activeIndex&&(v.activeIndex=l,f.links.forEach(function(e,t){e.classList.toggle("is-active",t===l)}),f.mobileLinks.forEach(function(e,t){e.classList.toggle("is-active",t===l)}),0<=l)&&f.sidebar&&(i=f.links[l])&&(t=f.sidebar.getBoundingClientRect(),(e=i.getBoundingClientRect()).top<t.top||e.bottom>t.bottom)&&(e=i.offsetTop,t=f.sidebar.clientHeight,i=i.offsetHeight,f.sidebar.scrollTo({top:Math.max(0,e-t/2+i/2),behavior:"smooth"}))}function L(){v.isOpen=!0,b.body.classList.add("toc-open"),f.mobileOverlay.classList.add("is-open"),f.mobileDrawer.classList.add("is-open"),f.mobileTrigger.setAttribute("aria-expanded","true")}function C(){v.isOpen=!1,b.body.classList.remove("toc-open"),f.mobileOverlay.classList.remove("is-open"),f.mobileDrawer.classList.remove("is-open"),f.mobileTrigger.setAttribute("aria-expanded","false")}e=function(){var s,r,l,e,t,i,o,n,a,c,d,m,p,u=b.querySelector(".post-content");!u||(u=u.querySelectorAll(g.headingSelector)).length<g.minHeadings||(v.headings=(s=[],r={},Array.prototype.forEach.call(u,function(e,t){var i=e.textContent.trim();if(i){if(!(n=e.id)){for(var n,l=n=i.toLowerCase().replace(/[^\w\u4e00-\u9fa5\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,50)||"heading",o=1;r[n];)n=l+"-"+o,o++;e.id=n}r[n]=!0;var a=parseInt(e.tagName.charAt(1),10);s.push({id:n,text:i,level:a,element:e})}}),s),v.headings.length<g.minHeadings)||((u=b.createElement("aside")).className="toc-sidebar",u.setAttribute("aria-label","Table of Contents"),(t=b.createElement("div")).className="toc-container",(e=b.createElement("div")).className="toc-header",e.innerHTML='<h3 class="toc-title">On this page</h3>',(l=b.createElement("ul")).className="toc-list",v.headings.forEach(function(e,t){var i=b.createElement("li"),n=(i.className="toc-item",b.createElement("a"));n.className="toc-link",n.href="#"+e.id,n.textContent=e.text,n.setAttribute("data-level",e.level),n.setAttribute("data-index",t),i.appendChild(n),l.appendChild(i),f.links.push(n)}),t.appendChild(e),t.appendChild(l),u.appendChild(t),b.body.appendChild(u),f.sidebar=u,f.tocList=l,(e=b.createElement("button")).className="toc-mobile-trigger",e.setAttribute("aria-label","Open table of contents"),e.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>',(t=b.createElement("div")).className="toc-mobile-overlay",(u=b.createElement("div")).className="toc-mobile-drawer",u.setAttribute("role","dialog"),u.setAttribute("aria-label","Table of Contents"),(m=b.createElement("div")).className="toc-mobile-handle",(p=b.createElement("div")).className="toc-mobile-header",p.innerHTML='<h3 class="toc-mobile-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>On this page</h3>',(i=b.createElement("button")).className="toc-mobile-close",i.setAttribute("aria-label","Close table of contents"),i.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',p.appendChild(i),(i=b.createElement("div")).className="toc-mobile-content",(o=b.createElement("ul")).className="toc-mobile-list",v.headings.forEach(function(e,t){var i=b.createElement("li"),n=(i.className="toc-mobile-item",b.createElement("a"));n.className="toc-mobile-link",n.href="#"+e.id,n.textContent=e.text,n.setAttribute("data-level",e.level),n.setAttribute("data-index",t),i.appendChild(n),o.appendChild(i),f.mobileLinks.push(n)}),i.appendChild(o),u.appendChild(m),u.appendChild(p),u.appendChild(i),b.body.appendChild(e),b.body.appendChild(t),b.body.appendChild(u),f.mobileTrigger=e,f.mobileOverlay=t,f.mobileDrawer=u,f.mobileTocList=o,b.body.classList.add("has-toc"),m=((i,n)=>{var l=0,o=null;return function(){var e=Date.now(),t=n-(e-l);t<=0?(o&&(clearTimeout(o),o=null),l=e,i()):o=o||setTimeout(function(){l=Date.now(),o=null,i()},t)}})(function(){E(),y()},g.throttleDelay),h.addEventListener("scroll",m,{passive:!0}),h.addEventListener("resize",m,{passive:!0}),f.links.forEach(function(e){e.addEventListener("click",x)}),f.mobileTrigger.addEventListener("click",L),f.mobileOverlay.addEventListener("click",C),(m=f.mobileDrawer.querySelector(".toc-mobile-close"))&&m.addEventListener("click",C),f.mobileLinks.forEach(function(e){e.addEventListener("click",function(e){x(e),C()})}),b.addEventListener("keydown",function(e){"Escape"===e.key&&v.isOpen&&C()}),d=f.mobileDrawer,(m=d.querySelector(".toc-mobile-handle"))&&(a=n=0,c=!1,m.addEventListener("touchstart",function(e){n=e.touches[0].clientY,c=!0},{passive:!0}),m.addEventListener("touchmove",function(e){c&&0<(e=(a=e.touches[0].clientY)-n)&&(d.style.transform="translateY("+e+"px)")},{passive:!0}),m.addEventListener("touchend",function(){var e;c&&(c=!1,e=a-n,d.style.transform="",100<e)&&C()},{passive:!0})),(p=b.querySelector(".post-content"))&&(p=p.getBoundingClientRect(),v.articleTop=p.top+h.pageYOffset,v.articleBottom=p.bottom+h.pageYOffset),E(),y(),setTimeout(function(){f.mobileTrigger&&f.mobileTrigger.classList.add("is-visible")},500))},"loading"===b.readyState?b.addEventListener("DOMContentLoaded",e):e()})();