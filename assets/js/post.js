!function(){var e,v=document;e=function(){var t,e,n,i,r,o,a,s,c,l,d,u,m=v.querySelector(".post-content");function f(e){var t;e.closest(".js-reframe")||((t=v.createElement("div")).className="js-reframe",e.parentNode.insertBefore(t,e),t.appendChild(e))}function p(){window.hljs&&Array.prototype.forEach.call(e,function(e){if(window.hljs.highlightElement(e),!e.classList.contains("language-text")&&!e.parentElement.querySelector(".lines")){var t=e.innerHTML.replace(/\n+$/,"").split(/\n(?!$)/g).length+1;if(!(t<2)){for(var n=v.createElement("div"),i=(n.className="lines",""),r=1;r<t;r++)i+='<span class="line" aria-hidden="true">'+r+"</span>";n.innerHTML=i,e.parentElement.appendChild(n)}}})}function h(){var e=window.innerHeight||v.documentElement.clientHeight,t=i.offsetTop+i.offsetHeight,t=100-(t-(window.scrollY+e)+e/3)/(t-e+e/3)*100,e=Math.max(0,Math.min(t,120));o.style.width=Math.min(e,100)+"%",a.classList.toggle("complete",100<e)}function w(){r||(r=!0,window.requestAnimationFrame(function(){h(),r=!1}))}function g(){var e;c||(c=!0,(e=v.createElement("script")).src="https://"+u+".disqus.com/embed.js",e.async=!0,e.setAttribute("data-timestamp",String(Date.now())),v.body.appendChild(e))}m&&(d=(d=v.currentScript||null)?d.getAttribute("data-highlight"):"",(t=m)&&['iframe[src*="youtube.com"]','iframe[src*="youtu.be"]','iframe[src*="vimeo.com"]','iframe[src*="bilibili.com"]','iframe[src*="player.spotify.com"]','iframe[src*="soundcloud.com"]','iframe[src*="music.163.com"]','iframe[src*="qq.com"]',"object","embed","video"].forEach(function(e){e=t.querySelectorAll(e);Array.prototype.forEach.call(e,f)}),d=d,(s=m)&&(e=s.querySelectorAll("pre code")).length&&(window.hljs?"requestIdleCallback"in window?window.requestIdleCallback(p,{timeout:300}):setTimeout(p,0):d&&((n=v.createElement("script")).src=d,n.defer=!0,n.onload=function(){p()},"requestIdleCallback"in window?window.requestIdleCallback(function(){v.body.appendChild(n)},{timeout:500}):setTimeout(function(){v.body.appendChild(n)},0))),i=m,o=v.querySelector(".progress-bar"),a=v.querySelector(".progress-container"),o&&a&&i&&(r=!1,["scroll","resize","orientationchange"].forEach(function(e){window.addEventListener(e,w,{passive:!0})}),h()),(s=v.getElementById("share-button"))&&navigator.share&&s.addEventListener("click",function(e){e.preventDefault(),navigator.share({title:v.title,url:window.location.href}).catch(function(){})}),d=v.getElementById("disqus_thread"),u=d&&d.dataset?d.dataset.disqusShortname:"",d)&&u&&(c=!1,"IntersectionObserver"in window?(l=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(g(),l.disconnect())})},{rootMargin:"400px 0px"})).observe(d):(window.addEventListener("scroll",g,{passive:!0}),window.addEventListener("touchstart",g,{passive:!0})))},"loading"===v.readyState?v.addEventListener("DOMContentLoaded",e):e()}();