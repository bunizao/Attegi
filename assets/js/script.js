document.addEventListener("DOMContentLoaded",function(){var s=document.documentElement,e=document.getElementById("menu"),t=document.querySelector(".nav-menu"),n=document.querySelector(".nav-close");function a(e){requestAnimationFrame(function(){s.classList.toggle("menu-active",e),t&&t.setAttribute("aria-expanded",e?"true":"false"),n&&n.setAttribute("aria-hidden",e?"false":"true")})}function i(e){e&&"keydown"===e.type&&"Enter"!==e.key&&" "!==e.key||(e&&e.preventDefault(),a(!s.classList.contains("menu-active")))}e&&(e.addEventListener("click",i),e.addEventListener("keydown",i)),t&&(t.addEventListener("click",i),t.addEventListener("keydown",i)),n&&(n.addEventListener("click",i),n.addEventListener("keydown",i)),a(s.classList.contains("menu-active")),s.classList.add("menu-ready"),window.addEventListener("resize",function(){a(!1)}),window.addEventListener("orientationchange",function(){a(!1)});var o=document.querySelector(".cover"),e=o?o.querySelector("img"):null,r=0,c=o?o.offsetHeight:0,d=!1,l=s.classList.contains("cover-active");function u(){o&&(c=o.offsetHeight||0)}function m(){var e;o&&(c||u(),e=window.pageYOffset,r=0<e?Math.floor(.25*e):0,o.style.transform="translate3d(0, "+r+"px, 0)",e=c?window.pageYOffset<c:l,s.classList.toggle("cover-active",e))}function f(){d||(d=!0,window.requestAnimationFrame(function(){m(),d=!1}))}u(),m(),e&&e.addEventListener("load",function(){u(),m()}),window.addEventListener("scroll",f,{passive:!0}),window.addEventListener("resize",function(){u(),f()},{passive:!0}),window.addEventListener("orientationchange",function(){u(),f()},{passive:!0}),setTimeout(function(){var e=document.querySelectorAll(".kg-gallery-image img");requestAnimationFrame(function(){e.forEach(function(e){var t=e.closest(".kg-gallery-image"),n=e.attributes.width.value,e=e.attributes.height.value;t.style.flex=n/e+" 1 0%"})})},0),setTimeout(function(){var e=document.querySelector(".js-theme"),t=e?e.querySelector(".theme-text"):null,n=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;function a(){requestAnimationFrame(function(){s.classList.remove("theme-dark","theme-light"),n&&s.classList.add("theme-dark"),t&&(t.textContent=e.getAttribute("data-system"))}),localStorage.setItem("attegi_theme","system")}function i(){requestAnimationFrame(function(){s.classList.remove("theme-light"),s.classList.add("theme-dark"),t&&(t.textContent=e.getAttribute("data-dark"))}),localStorage.setItem("attegi_theme","dark")}function o(){requestAnimationFrame(function(){s.classList.remove("theme-dark"),s.classList.add("theme-light"),t&&(t.textContent=e.getAttribute("data-light"))}),localStorage.setItem("attegi_theme","light")}switch(localStorage.getItem("attegi_theme")){case"dark":i();break;case"light":o();break;default:a()}e&&e.addEventListener("click",function(e){e.preventDefault(),(s.classList.contains("theme-dark")||s.classList.contains("theme-light")?s.classList.contains("theme-dark")?o:a:i)()})},0),setTimeout(function(){var e,n,a,t;function i(){var e;n||a||!t||(a=!0,(e=document.createElement("script")).src=t,e.async=!0,e.setAttribute("data-ghost",t),e.onload=function(){a=!(n=!0)},e.onerror=function(){a=!1,console.error("Failed to load Ghost Portal")},document.body.appendChild(e))}document.querySelector("[data-portal]")&&(e=document.querySelectorAll("[data-portal]"),a=n=!1,t=window.ghost&&window.ghost.portal?window.ghost.portal:null,e.forEach(function(t){t.addEventListener("click",function(e){n||a||(e.preventDefault(),i(),setTimeout(function(){t.click()},500))},{passive:!1}),t.addEventListener("mouseenter",function(){i()},{once:!0,passive:!0}),t.addEventListener("focus",function(){i()},{once:!0,passive:!0})}))},0)});