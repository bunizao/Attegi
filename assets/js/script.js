document.addEventListener("DOMContentLoaded",function(){var t=document.documentElement,e=document.getElementById("menu"),n=document.querySelector(".nav-menu"),a=document.querySelector(".nav-close");function i(e){t.classList.toggle("menu-active",e),n&&n.setAttribute("aria-expanded",e?"true":"false"),a&&a.setAttribute("aria-hidden",e?"false":"true")}function o(e){e&&"keydown"===e.type&&"Enter"!==e.key&&" "!==e.key||(e&&e.preventDefault(),i(!t.classList.contains("menu-active")))}e&&(e.addEventListener("click",o),e.addEventListener("keydown",o)),n&&(n.addEventListener("click",o),n.addEventListener("keydown",o)),a&&(a.addEventListener("click",o),a.addEventListener("keydown",o)),i(t.classList.contains("menu-active")),t.classList.add("menu-ready"),window.addEventListener("resize",function(){i(!1)}),window.addEventListener("orientationchange",function(){i(!1)});var s,c,r,d=document.querySelector(".cover"),e=d?d.querySelector("img"):null,l=0,u=d?d.offsetHeight:0,m=!1,v=t.classList.contains("cover-active");function f(){d&&(u=d.offsetHeight||0)}function h(){var e;d&&(u||f(),e=window.pageYOffset,l=0<e?Math.floor(.25*e):0,d.style.transform="translate3d(0, "+l+"px, 0)",e=u?window.pageYOffset<u:v,t.classList.toggle("cover-active",e))}function g(){m||(m=!0,window.requestAnimationFrame(function(){h(),m=!1}))}f(),h(),e&&e.addEventListener("load",function(){f(),h()}),window.addEventListener("scroll",g,{passive:!0}),window.addEventListener("resize",function(){f(),g()},{passive:!0}),window.addEventListener("orientationchange",function(){f(),g()},{passive:!0}),document.querySelectorAll(".kg-gallery-image img").forEach(function(e){var t=e.closest(".kg-gallery-image"),n=e.attributes.width.value,e=e.attributes.height.value;t.style.flex=n/e+" 1 0%"});var L=document.querySelector(".js-theme"),w=L?L.querySelector(".theme-text"):null,k=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;function y(){t.classList.remove("theme-dark","theme-light"),k&&t.classList.add("theme-dark"),localStorage.setItem("attegi_theme","system"),w&&(w.textContent=L.getAttribute("data-system"))}function E(){t.classList.remove("theme-light"),t.classList.add("theme-dark"),localStorage.setItem("attegi_theme","dark"),w&&(w.textContent=L.getAttribute("data-dark"))}function p(){t.classList.remove("theme-dark"),t.classList.add("theme-light"),localStorage.setItem("attegi_theme","light"),w&&(w.textContent=L.getAttribute("data-light"))}switch(localStorage.getItem("attegi_theme")){case"dark":E();break;case"light":p();break;default:y()}function S(){var e;s||c||!r||(c=!0,(e=document.createElement("script")).src=r,e.async=!0,e.setAttribute("data-ghost",r),e.onload=function(){c=!(s=!0)},e.onerror=function(){c=!1,console.error("Failed to load Ghost Portal")},document.body.appendChild(e))}L&&L.addEventListener("click",function(e){e.preventDefault(),(t.classList.contains("theme-dark")||t.classList.contains("theme-light")?t.classList.contains("theme-dark")?p:y:E)()}),document.querySelector("[data-portal]")&&(e=document.querySelectorAll("[data-portal]"),c=s=!1,r=window.ghost&&window.ghost.portal?window.ghost.portal:null,e.forEach(function(t){t.addEventListener("click",function(e){s||c||(e.preventDefault(),S(),setTimeout(function(){t.click()},500))},{passive:!1}),t.addEventListener("mouseenter",function(){S()},{once:!0,passive:!0}),t.addEventListener("focus",function(){S()},{once:!0,passive:!0})}))});