document.addEventListener("DOMContentLoaded",function(){var t=document.documentElement,e=document.getElementById("menu"),n=document.querySelector(".nav-menu"),a=document.querySelector(".nav-close");function i(e){t.classList.toggle("menu-active",e),n&&n.setAttribute("aria-expanded",e?"true":"false"),a&&a.setAttribute("aria-hidden",e?"false":"true")}function s(e){e&&"keydown"===e.type&&"Enter"!==e.key&&" "!==e.key||(e&&e.preventDefault(),i(!t.classList.contains("menu-active")))}e&&(e.addEventListener("click",s),e.addEventListener("keydown",s)),n&&(n.addEventListener("click",s),n.addEventListener("keydown",s)),a&&(a.addEventListener("click",s),a.addEventListener("keydown",s)),i(t.classList.contains("menu-active")),t.classList.add("menu-ready"),window.addEventListener("resize",function(){i(!1)}),window.addEventListener("orientationchange",function(){i(!1)});var o=document.querySelector(".cover"),e=o?o.querySelector("img"):null,c=0,r=o?o.offsetHeight:0,d=!1,l=t.classList.contains("cover-active");function u(){o&&(r=o.offsetHeight||0)}function m(){var e;o&&(r||u(),e=window.pageYOffset,c=0<e?Math.floor(.25*e):0,o.style.transform="translate3d(0, "+c+"px, 0)",e=r?window.pageYOffset<r:l,t.classList.toggle("cover-active",e))}function g(){d||(d=!0,window.requestAnimationFrame(function(){m(),d=!1}))}u(),m(),e&&e.addEventListener("load",function(){u(),m()}),window.addEventListener("scroll",g,{passive:!0}),window.addEventListener("resize",function(){u(),g()},{passive:!0}),window.addEventListener("orientationchange",function(){u(),g()},{passive:!0}),document.querySelectorAll(".kg-gallery-image img").forEach(function(e){var t=e.closest(".kg-gallery-image"),n=e.attributes.width.value,e=e.attributes.height.value;t.style.flex=n/e+" 1 0%"});var v=document.querySelector(".js-theme"),h=v?v.querySelector(".theme-text"):null,f=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;function L(){t.classList.remove("theme-dark","theme-light"),f&&t.classList.add("theme-dark"),localStorage.setItem("attegi_theme","system"),h&&(h.textContent=v.getAttribute("data-system"))}function w(){t.classList.remove("theme-light"),t.classList.add("theme-dark"),localStorage.setItem("attegi_theme","dark"),h&&(h.textContent=v.getAttribute("data-dark"))}function k(){t.classList.remove("theme-dark"),t.classList.add("theme-light"),localStorage.setItem("attegi_theme","light"),h&&(h.textContent=v.getAttribute("data-light"))}switch(localStorage.getItem("attegi_theme")){case"dark":w();break;case"light":k();break;default:L()}v&&v.addEventListener("click",function(e){e.preventDefault(),(t.classList.contains("theme-dark")||t.classList.contains("theme-light")?t.classList.contains("theme-dark")?k:L:w)()})});