document.addEventListener("DOMContentLoaded",function(){var s=document.documentElement,e=document.getElementById("menu"),t=document.querySelector(".nav-menu"),n=document.querySelector(".nav-close");function a(e){requestAnimationFrame(function(){s.classList.toggle("menu-active",e),t&&t.setAttribute("aria-expanded",e?"true":"false"),n&&n.setAttribute("aria-hidden",e?"false":"true")})}function i(e){e&&"keydown"===e.type&&"Enter"!==e.key&&" "!==e.key||(e&&e.preventDefault(),a(!s.classList.contains("menu-active")))}e&&(e.addEventListener("click",i),e.addEventListener("keydown",i)),t&&(t.addEventListener("click",i),t.addEventListener("keydown",i)),n&&(n.addEventListener("click",i),n.addEventListener("keydown",i)),a(s.classList.contains("menu-active")),s.classList.add("menu-ready"),window.addEventListener("resize",function(){a(!1)}),window.addEventListener("orientationchange",function(){a(!1)});var o,r,c,d,l=document.querySelector(".cover"),e=l?l.querySelector("img"):null,u=0,m=l?l.offsetHeight:0,f=!1,v=s.classList.contains("cover-active");function g(){l&&(m=l.offsetHeight||0)}function h(){var e;l&&(m||g(),e=window.pageYOffset,u=0<e?Math.floor(.25*e):0,l.style.transform="translate3d(0, "+u+"px, 0)",e=m?window.pageYOffset<m:v,s.classList.toggle("cover-active",e))}function L(){f||(f=!0,window.requestAnimationFrame(function(){h(),f=!1}))}function w(){var e=window.pageYOffset||document.documentElement.scrollTop,e=r<e;e!==c&&(c=e,requestAnimationFrame(function(){o.classList.toggle("is-visible",c)}))}g(),h(),e&&e.addEventListener("load",function(){g(),h()}),window.addEventListener("scroll",L,{passive:!0}),window.addEventListener("resize",function(){g(),L()},{passive:!0}),window.addEventListener("orientationchange",function(){g(),L()},{passive:!0}),document.querySelector(".nav-header"),(e=document.querySelector(".nav-header .logo"))&&((o=document.createElement("div")).className="sticky-logo",o.innerHTML=e.innerHTML,document.body.appendChild(o),d=c=!(r=100),window.addEventListener("scroll",function(){d||(d=!0,requestAnimationFrame(function(){w(),d=!1}))},{passive:!0}),w()),setTimeout(function(){var e=document.querySelectorAll(".kg-gallery-image img");requestAnimationFrame(function(){Array.prototype.forEach.call(e,function(e){function i(e){return e&&(e=parseFloat(e),!isNaN(e))&&0<e?e:null}function t(e){var t,n,a=e.closest(".kg-gallery-image");a&&(t=i((e=e).getAttribute("width")),n=i(e.getAttribute("height")),t=t&&n?t/n:e.naturalWidth&&e.naturalHeight?e.naturalWidth/e.naturalHeight:null)&&(a.style.flex=t+" 1 0%")}var n;e.complete&&0<e.naturalWidth?t(e):(n=function(){t(e),e.removeEventListener("load",n)},e.addEventListener("load",n))})})},0),setTimeout(function(){var e=document.querySelector(".js-theme"),t=e?e.querySelector(".theme-text"):null,n=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;function a(){requestAnimationFrame(function(){s.classList.remove("theme-dark","theme-light"),n&&s.classList.add("theme-dark"),t&&(t.textContent=e.getAttribute("data-system"))}),localStorage.setItem("attegi_theme","system")}function i(){requestAnimationFrame(function(){s.classList.remove("theme-light"),s.classList.add("theme-dark"),t&&(t.textContent=e.getAttribute("data-dark"))}),localStorage.setItem("attegi_theme","dark")}function o(){requestAnimationFrame(function(){s.classList.remove("theme-dark"),s.classList.add("theme-light"),t&&(t.textContent=e.getAttribute("data-light"))}),localStorage.setItem("attegi_theme","light")}switch(localStorage.getItem("attegi_theme")){case"dark":i();break;case"light":o();break;default:a()}e&&e.addEventListener("click",function(e){e.preventDefault(),(s.classList.contains("theme-dark")||s.classList.contains("theme-light")?s.classList.contains("theme-dark")?o:a:i)()})},0)});