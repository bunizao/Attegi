{{!< default}}

{{!--
    tag.hbs
    -------
    Tag archive template displaying posts filtered by a specific tag.
    Shows tag name, description, post count, and optional feature image.
    Uses the loop partial to render paginated post cards.
--}}

<header class="blog-header{{#if tag.feature_image}} has-cover{{/if}}">
	<div class="inner">
		<div class="archive archive-tag box archive-box">
			<span class="archive-info">
				<span class="archive-type">{{t "Topic"}}</span>
				<span class="archive-count">{{plural pagination.total empty=(t "No Posts") singular=(t "% Post") plural=(t "% Posts")}}</span>
			</span>
			<h2 class="archive-title">{{tag.name}}</h2>
			{{!-- Tag description with fallback message --}}
			{{#if tag.description}}
				<span class="archive-description">{{{tag.description}}}</span>
			{{else}}
				<span class="archive-description archive-description-fallback">{{t "Posts tagged with"}} "{{tag.name}}"</span>
			{{/if}}
		</div>

		{{#if tag.feature_image}}
		<div class="blog-cover cover">
			<picture>
				<source
					type="image/avif"
					srcset="{{> "srcset" image=tag.feature_image format="avif" quality="50" include_xl=true}}"
					sizes="(max-width: 960px) 100vw, 960px" />
				<source
					type="image/webp"
					srcset="{{> "srcset" image=tag.feature_image format="webp" quality="50" include_xl=true}}"
					sizes="(max-width: 960px) 100vw, 960px" />
				<source
					srcset="{{> "srcset" image=tag.feature_image quality="50" include_xl=true}}"
					sizes="(max-width: 960px) 100vw, 960px" />
				<img
					srcset="{{> "srcset" image=tag.feature_image quality="50" include_xl=true}}"
					src="{{img_url tag.feature_image size="xl" quality="50"}}"
					alt="{{tag.name}}"
					loading="eager"
					decoding="async"
					fetchpriority="high"
					sizes="(max-width: 960px) 100vw, 960px" />
			</picture>
		</div>
		{{/if}}
	</div>
</header>

<div id="index" class="container">

	<main class="content" role="main">

		{{> "loop"}}

	</main>

</div>
