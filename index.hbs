{{!< default}}

{{!--
    index.hbs
    ---------
    Homepage template displaying the main blog header and post listing.
    Shows site title, description, and cover image (if set).
    Uses the loop partial to render paginated post cards.
--}}

{{#if @site.cover_image}}
{{#contentFor "html_class"}}cover-active{{/contentFor}}
{{#contentFor "head"}}
<link rel="preload"
	as="image"
	href="{{img_url @site.cover_image size="l" quality="50"}}"
	imagesrcset="{{img_url @site.cover_image size="s" quality="50"}} 320w, {{img_url @site.cover_image size="m" quality="50"}} 640w, {{img_url @site.cover_image size="l" quality="50"}} 960w"
	imagesizes="(max-width: 1100px) 100vw, 1100px">
{{/contentFor}}
{{/if}}

<header class="blog-header {{#if @site.cover_image}} has-cover{{/if}}">
	<div class="inner">
		<div class="box blog-box">
			<h1 class="blog-name">{{@site.title}}</h1>
			{{#if @site.description}}
			<span class="blog-description">{{@site.description}}</span>
			{{/if}}
		</div>
		{{#if @site.cover_image}}
		<div class="blog-cover cover">
			<picture>
				<source
					type="image/webp"
					srcset="{{img_url @site.cover_image size="s" format="webp" quality="50"}} 320w,
									{{img_url @site.cover_image size="m" format="webp" quality="50"}} 640w,
									{{img_url @site.cover_image size="l" format="webp" quality="50"}} 960w"
					sizes="(max-width: 1100px) 100vw, 1100px" />
				<source
					srcset="{{img_url @site.cover_image size="s" quality="50"}} 320w,
									{{img_url @site.cover_image size="m" quality="50"}} 640w,
									{{img_url @site.cover_image size="l" quality="50"}} 960w"
					sizes="(max-width: 1100px) 100vw, 1100px" />
				<img
					srcset="{{img_url @site.cover_image size="s" quality="50"}} 320w,
									{{img_url @site.cover_image size="m" quality="50"}} 640w,
									{{img_url @site.cover_image size="l" quality="50"}} 960w"
					sizes="(max-width: 1100px) 100vw, 1100px"
					src="{{img_url @site.cover_image size="l" quality="50"}}"
					alt="{{@site.title}}"
					loading="eager"
					decoding="async"
					fetchpriority="high" />
			</picture>
		</div>
		{{/if}}
	</div>
</header>

<div id="index" class="container">

	<main class="content" role="main">

		{{> "loop"}}

	</main>

</div>
