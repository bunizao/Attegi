{{!--
    loop.hbs
    --------
    Post listing partial used by index, tag, and author templates.
    Renders a paginated grid of post cards with:
    - Post title and excerpt
    - Publication date
    - Tag chips (up to 3 tags)
    - Featured post indicator
    Includes pagination controls at bottom.
--}}

{{#foreach posts visibility="all"}}

<article class="{{post_class}}">
	<div class="inner">
		<div class="box post-box">
			<div class="post-box-header">
				<div class="post-box-title-wrap">
					<h2 class="post-title"><a href="{{url}}">{{{title}}}</a></h2>
				</div>
				{{#if tags}}{{#if featured}}
				<div class="post-tags-inline">
					<span class="post-feature-tag">#{{t "Featured"}}</span>
					{{#foreach tags limit="3"}}
					<a href="{{url}}" class="post-tag-chip">{{name}}</a>
					{{/foreach}}
				</div>
				{{else}}
				<div class="post-tags-inline">
					{{#foreach tags limit="3"}}
					<a href="{{url}}" class="post-tag-chip">{{name}}</a>
					{{/foreach}}
				</div>
				{{/if}}{{else}}{{#if featured}}
				<div class="post-tags-inline">
					<span class="post-feature-tag">#{{t "Featured"}}</span>
				</div>
				{{/if}}{{/if}}
			</div>
			<a class="post-box-link" href="{{url}}" aria-label="{{title}}">
				<span class="post-meta">
					<time datetime="{{date format='YYYY-MM-DD'}}">{{date format="MMMM DD, YYYY"}}</time>
				</span>
				<p class="post-excerpt">{{excerpt characters="180"}}</p>
			</a>
		</div>
	</div>
</article>

{{/foreach}}

{{pagination}}
